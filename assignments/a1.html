<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2020-10-20 Tue 01:19 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Computer Science 3MI3 – 2020 assignment 1</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="Mark Armstrong" />
<meta name="description" content="Writing interpreters for simple expression languages."
 />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/htmlize.css"/>
<link rel="stylesheet" type="text/css" href="styles/readtheorg/css/readtheorg.css"/>
<script type="text/javascript" src="styles/lib/js/jquery.min.js"></script>
<script type="text/javascript" src="styles/lib/js/bootstrap.min.js"></script>
<script type="text/javascript" src="styles/lib/js/jquery.stickytableheaders.min.js"></script>
<script type="text/javascript" src="styles/readtheorg/js/readtheorg.js"></script>
<style>pre.src{background:#000000;color:white;} </style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        displayAlign: "center",
        displayIndent: "0em",

        "HTML-CSS": { scale: 100,
                        linebreaks: { automatic: "false" },
                        webFont: "TeX"
                       },
        SVG: {scale: 100,
              linebreaks: { automatic: "false" },
              font: "TeX"},
        NativeMML: {scale: 100},
        TeX: { equationNumbers: {autoNumber: "AMS"},
               MultLineWidth: "85%",
               TagSide: "right",
               TagIndent: ".8em"
             }
});
</script>
<script type="text/javascript"
        src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body>
<div id="content">
<h1 class="title">Computer Science 3MI3 – 2020 assignment 1
<br />
<span class="subtitle">A language of expressions</span>
</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Updates-and-file-history">Updates and file history</a>
<ul>
<li><a href="#September-21st">September 21st</a></li>
<li><a href="#October-13th">October 13th</a></li>
<li><a href="#October-19th">October 19th</a></li>
</ul>
</li>
<li><a href="#Boilerplate">Boilerplate</a>
<ul>
<li><a href="#Submission-procedures">Documentation</a></li>
<li><a href="#Submission-procedures">Submission procedures</a>
<ul>
<li><a href="#org1469612">Assignment naming requirements</a></li>
</ul>
</li>
<li><a href="#Proper-conduct-for-coursework">Proper conduct for coursework</a></li>
</ul>
</li>
<li><a href="#Informal-description-of-the-expression-language">Informal description of the expression language</a>
<ul>
<li><a href="#Example-1">Example 1</a></li>
<li><a href="#Example-2">Example 2</a></li>
</ul>
</li>
<li><a href="#Part-1-–-Interpreter-written-in-Scala--[20 marks]">Part 1 – Interpreter written in Scala  [20 marks]</a>
<ul>
<li><a href="#1.1-Representation-[5 marks]">1.1 Representation [5 marks]</a></li>
<li><a href="#1.2-Interpreter----[15 marks]">1.2 Interpreter    [15 marks]</a></li>
</ul>
</li>
<li><a href="#Part-2-–-Interpreter-written-in-Prolog-[20 marks]">Part 2 – Interpreter written in Prolog [20 marks]</a>
<ul>
<li><a href="#1.1-Expression-recogniser-[5 marks]">2.1 Expression recogniser [5 marks]</a></li>
<li><a href="#1.2-Interpreter-----------[15 marks]">2.2 Interpreter           [15 marks]</a></li>
</ul>
</li>
<li><a href="#Part-3-–-Variables-and-substitution----[30 marks]">Part 3 – Variables and substitution    [30 marks]</a>
<ul>
<li><a href="#Part-3-description">Part 3 description</a></li>
<li><a href="#The-part-3">The part 3</a>
<ul>
<li><a href="#Hint-(added-October-13th)">Hint (added October 13th)</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#Aside-–-review-of-substitution">Aside – review of substitution</a>
<ul>
<li><a href="#The-scope-of-substitution">The scope of substitution</a></li>
</ul>
</li>
<li><a href="#Part-4-–-Boolean-expressions-----------[30 marks]">Part 4 – Boolean expressions           [30 marks]</a>
<ul>
<li><a href="#Part-4-description">Part 4 description</a></li>
<li><a href="#The-part-4">The part 4</a></li>
</ul>
</li>
<li><a href="#Part-5-–-Bonus-------------------[10 bonus_marks]">Part 5 – Bonus: parsing                [10 bonus marks]</a></li>
<li><a href="#Submission-checklist">Submission checklist</a></li>
<li><a href="#Testing">Testing</a>
<ul>
<li><a href="#Automated-testing-via-Docker">Automated testing via Docker</a></li>
<li><a href="#The-tests">The tests</a>
<ul>
<li><a href="#Scala">Scala</a></li>
<li><a href="#Prolog">Prolog</a></li>
</ul>
</li>
<li><a href="#The-Docker-setup">The Docker setup</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-Introduction" class="outline-2">
<h2 id="Introduction">Introduction</h2>
<div class="outline-text-2" id="text-Introduction">
<p>
This assignment asks you to construct interpreters
for a simple language of mathematical expressions.
To put it another way, you are asked to construct simple calculators.
</p>

<p>
We provide an informal description of the language below.
Your task is to then represent the terms of the language
in Scala and Prolog, using the languages' facilities for
representing such data.
</p>
</div>
</div>

<div id="outline-container-Updates-and-file-history" class="outline-2">
<h2 id="Updates-and-file-history">Updates and file history</h2>
<div class="outline-text-2" id="text-Updates-and-file-history">
</div>

<div id="outline-container-September-21st" class="outline-3">
<h3 id="September-21st">September 21st</h3>
<div class="outline-text-3" id="text-September-21st">
<ul class="org-ul">
<li>Original version published.</li>
</ul>
</div>
</div>

<div id="outline-container-October-13th" class="outline-3">
<h3 id="October-13th">October 13th</h3>
<div class="outline-text-3" id="text-October-13th">
<ul class="org-ul">
<li><b>A documentation requirement has been added!</b>
<ul class="org-ul">
<li>As part of the boilerplate, which is now in place.</li>
</ul></li>
<li>A submission checklist was added near the end of this file
to help bring attention to the documentation requirement.</li>
<li>The testing code is now given for the Scala portions.
<ul class="org-ul">
<li>The scripts and the Prolog code should come soon.</li>
</ul></li>
<li>The instructions to use a “<code>Simple</code>” constructor in
the Scala types of parts 3 and 4 have been removed.
Instead, the constructors from part 1 should be repeated.
<ul class="org-ul">
<li>(I had been over-eager in trying to avoid repetition,
and somehow failed to realise that the use of the “<code>Simple</code>”
constructor would rule out most interesting expressions 🙁.)</li>
</ul></li>
<li>Instructions are now given at the beginning of each part
as to the filenames.</li>
<li>The naming of the types and the interpretation functions/predicates
has also been standardised.</li>
<li>The word “task” has been replaced by “part”.</li>
</ul>
</div>
</div>

<div id="outline-container-October-19th" class="outline-3">
<h3 id="October-19th">October 19th</h3>
<div class="outline-text-3" id="text-October-19th">
<p>
An aside giving a review of substitution was added following part 3.
</p>
</div>
</div>
</div>

<div id="outline-container-Boilerplate" class="outline-2">
<h2 id="Boilerplate">Boilerplate</h2>
<div class="outline-text-2" id="text-Boilerplate">
</div>

<div id="outline-container-Submission-procedures" class="outline-3">
<h3 id="Submission-procedures">Documentation</h3>
<div class="outline-text-3" id="text-Submission-procedures">
<p>
In addition to the code for the assignments,
you are required to submit (relatively light) documentation,
along the lines of that found in
<a href="https://armkeh.github.io/principles-of-programming-languages/#outline-container-Lecture-literate-programs">the literate programs</a>
from lectures and tutorials.
</p>
<ul class="org-ul">
<li>Those occasionally include a lot of writing when introducing concepts;
you do not have to introduce concepts, so your documentation
should be similar to the <i>end</i> of those documents,
where only the purpose and implementation details
of types, functions, etc., are discussed.</li>
</ul>

<p>
This documentation <b>must be</b> in the literate style,
with (nicely typeset) English paragraphs alongside code snippets;
comments in your source code do not count.
The basic requirement is
</p>
<ul class="org-ul">
<li>the English paragraphs must use non-fixed width font, whereas</li>
<li>the code snippets must use fixed width font.</li>
<li>For example, see these lecture notes on Prolog:
<ul class="org-ul">
<li><a href="https://courses.cs.washington.edu/courses/cse341/98sp/logic/prolog.html">https://courses.cs.washington.edu/courses/cse341/98sp/logic/prolog.html</a></li>
</ul></li>
</ul>
<p>
But you are encouraged to strive for nicer than just
“the basic requirement”.
(the ability to write decent looking documentation is an asset!
</p>

<p>
You are free to present your documentation in any of these formats:
</p>
<ul class="org-ul">
<li>an HTML file,
<ul class="org-ul">
<li>(named <code>README.html</code>)</li>
</ul></li>
<li>a PDF (for instance, by writing it in LaTeX using
the <code>listings</code> or <code>minted</code> package for your code blocks),
<ul class="org-ul">
<li>(named <code>README.pdf</code>), or</li>
</ul></li>
<li>rendering on GitLab (for instance, by writing it in markdown or Org)
<ul class="org-ul">
<li>(named <code>README.md</code> or <code>README.org</code>.)</li>
</ul></li>
</ul>
<p>
If you wish to use another format, contact Mark to discuss it.
</p>

<p>
Not all of your code needs to be shown;
only portions which are of interest are needed.
Feel free to omit some “repetitive” portions.
(For instance, if there are several cases in a definition
which look almost identical, only one or two need to be shown.)
</p>
</div>
</div>

<div id="outline-container-Submission-procedures" class="outline-3">
<h3 id="Submission-procedures">Submission procedures</h3>
<div class="outline-text-3" id="text-Submission-procedures">
<p>
The same guidelines as for homework
(which can be seen in any of the homework files)
apply to assignments, except for the differences below.
</p>
</div>

<div id="outline-container-org1469612" class="outline-4">
<h4 id="org1469612">Assignment naming requirements</h4>
<div class="outline-text-4" id="text-org1469612">
<p>
Place all files for the assignment
inside a folder titled <code>an</code>, where <code>n</code> is the number of the assignment.
So, for assignment 1, use the folder <code>a1</code>, for assignment 2 the folder <code>a2</code>, etc.
Ensure you do not capitalise the <code>a</code>.
</p>

<p>
Each part of the assignments will direct you on where to
save your code for that part. Follow those instructions!
</p>

<div class="org-center">
<p>
<b>If the language supports multiple different file extensions,</b>
<b>you must still follow the extension conventions noted in the assignment.</b>
</p>
</div>

<div class="org-center">
<p>
<b>Incorrect naming of files may result in up to a 5% deduction in your grade.</b>
</p>
</div>
<p>
This is slightly decreased from the 10% for homeworks.
</p>
</div>
</div>
</div>

<div id="outline-container-Proper-conduct-for-coursework" class="outline-3">
<h3 id="Proper-conduct-for-coursework">Proper conduct for coursework</h3>
<div class="outline-text-3" id="text-Proper-conduct-for-coursework">
<p>
Refer to the homework code of conduct available in any of the homework files.
The same guidelines apply to assignments.
</p>
</div>
</div>
</div>

<div id="outline-container-Informal-description-of-the-expression-language" class="outline-2">
<h2 id="Informal-description-of-the-expression-language">Informal description of the expression language</h2>
<div class="outline-text-2" id="text-Informal-description-of-the-expression-language">
<p>
The language consists of integer constants and seven <i>prefix</i> operators.
</p>
<ul class="org-ul">
<li>The unary operator <code>const</code> which operates on integers.</li>
<li>The unary operators <code>neg</code> (negative) and <code>abs</code> (absolute value)
which operate on expressions of this language.</li>
<li>The binary operators <code>plus</code>, <code>times</code>, <code>minus</code> and <code>exp</code> (exponent)
which operator on expressions of this language.</li>
</ul>

<p>
The fact that all the operators are prefix
means that this language does not admit ambiguity;
that is, even without using parentheses,
there is only one possible reading of a given expression.
</p>
</div>

<div id="outline-container-Example-1" class="outline-3">
<h3 id="Example-1">Example 1</h3>
<div class="outline-text-3" id="text-Example-1">
<p>
As an example of a syntactically correct expression, consider
</p>
<div class="org-src-container">
<pre class="src src-text">abs minus abs const 5 abs const 6
</pre>
</div>
<p>
which, if we parenthesised the expression and dropped the <code>const</code>'s, would read
</p>
<div class="org-src-container">
<pre class="src src-text"><span style="color: #00cd68;">(</span>abs <span style="color: #b6a0ff;">(</span>minus <span style="color: #6ae4b9;">(</span>abs 5<span style="color: #6ae4b9;">)</span> <span style="color: #6ae4b9;">(</span>abs 6<span style="color: #6ae4b9;">)</span><span style="color: #b6a0ff;">)</span><span style="color: #00cd68;">)</span>
</pre>
</div>
<p>
or, in the usual notation,
</p>
</div>
</div>

<div id="outline-container-Example-2" class="outline-3">
<h3 id="Example-2">Example 2</h3>
<div class="outline-text-3" id="text-Example-2">
<p>
As an additional example, consider
</p>
<div class="org-src-container">
<pre class="src src-text">plus plus plus exp const 1 const 2 exp const 2 const 2
    exp const 3 const 2 exp const 4 const 2
</pre>
</div>
<p>
which, if we parenthesised the expression and dropped the <code>const</code>'s, would read
</p>
<div class="org-src-container">
<pre class="src src-text"><span style="color: #00cd68;">(</span>plus <span style="color: #b6a0ff;">(</span>plus <span style="color: #6ae4b9;">(</span>plus <span style="color: #f0ce43;">(</span>exp 1 2<span style="color: #f0ce43;">)</span> <span style="color: #f0ce43;">(</span>exp 2 2<span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span> <span style="color: #6ae4b9;">(</span>exp 3 2<span style="color: #6ae4b9;">)</span><span style="color: #b6a0ff;">)</span> <span style="color: #b6a0ff;">(</span>exp 4 2<span style="color: #b6a0ff;">)</span><span style="color: #00cd68;">)</span>
</pre>
</div>
<p>
or, in the usual notation,
</p>
</div>
</div>
</div>

<div id="outline-container-Part-1-–-Interpreter-written-in-Scala--[20 marks]" class="outline-2">
<h2 id="Part-1-–-Interpreter-written-in-Scala--[20 marks]">Part 1 – Interpreter written in Scala  [20 marks]</h2>
<div class="outline-text-2" id="text-Part-1-–-Interpreter-written-in-Scala--[20 marks]">
<div class="org-center">
<p>
<b>Place your code for this part in a file <code>a1p1.sc</code>.</b>
</p>
</div>
</div>

<div id="outline-container-1.1-Representation-[5 marks]" class="outline-3">
<h3 id="1.1-Representation-[5 marks]">1.1 Representation [5 marks]</h3>
<div class="outline-text-3" id="text-1.1-Representation-[5 marks]">
<p>
Create a representation of the above described expressions
in Scala using the standard approach for algebraic datatypes,
and call this type <code>Expr</code>.
</p>

<p>
Name your constructors after the operators,
of course capitalising the names.
</p>

<p>
So the expression
</p>
<div class="org-src-container">
<pre class="src src-text">abs minus abs const 5 abs const 6
</pre>
</div>
<p>
should be represented using your type as
</p>
<div class="org-src-container">
<pre class="src src-amm"><span style="color: #00bcff;">Abs</span><span style="color: #00cd68;">(</span><span style="color: #00bcff;">Minus</span><span style="color: #b6a0ff;">(</span><span style="color: #00bcff;">Abs</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Const</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">5</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">Abs</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Const</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">6</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span><span style="color: #b6a0ff;">)</span><span style="color: #00cd68;">)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-1.2-Interpreter----[15 marks]" class="outline-3">
<h3 id="1.2-Interpreter----[15 marks]">1.2 Interpreter    [15 marks]</h3>
<div class="outline-text-3" id="text-1.2-Interpreter----[15 marks]">
<p>
Define a method <code>interpretExpr</code> acting on <code>Expr</code> which
calculates the value of an <code>Expr</code>.
</p>
</div>
</div>
</div>

<div id="outline-container-Part-2-–-Interpreter-written-in-Prolog-[20 marks]" class="outline-2">
<h2 id="Part-2-–-Interpreter-written-in-Prolog-[20 marks]">Part 2 – Interpreter written in Prolog [20 marks]</h2>
<div class="outline-text-2" id="text-Part-2-–-Interpreter-written-in-Prolog-[20 marks]">
<div class="org-center">
<p>
<b>Place your code for this part in a file <code>a1p2.pl</code>.</b>
</p>
</div>
</div>

<div id="outline-container-1.1-Expression-recogniser-[5 marks]" class="outline-3">
<h3 id="1.1-Expression-recogniser-[5 marks]">2.1 Expression recogniser [5 marks]</h3>
<div class="outline-text-3" id="text-1.1-Expression-recogniser-[5 marks]">
<p>
Define a predicate <code>isExpr</code> in Prolog which recognises
trees which represent the above defined expressions.
</p>

<p>
The labels on the trees should be the name of the operation
appended by <code>E</code> (in order to avoid any clash with builtin predicates
of the same name.)
</p>

<p>
So the expression
</p>
<div class="org-src-container">
<pre class="src src-text">abs minus abs const 5 abs const 6
</pre>
</div>
<p>
would be represented in Prolog as
</p>
<div class="org-src-container">
<pre class="src src-prolog"><span style="color: #feacd0;">absE</span>(minusE(absE(constE(5)), absE(constE(6))))
</pre>
</div>
<p>
and the query <code>isExpr(absE(minusE(absE(constE(5)), absE(constE(6)))))</code> would
result in the response <code>true</code>.
</p>
</div>
</div>

<div id="outline-container-1.2-Interpreter-----------[15 marks]" class="outline-3">
<h3 id="1.2-Interpreter-----------[15 marks]">2.2 Interpreter           [15 marks]</h3>
<div class="outline-text-3" id="text-1.2-Interpreter-----------[15 marks]">
<p>
Define a binary predicate <code>interpretExpr</code> which
relates these expressions to their numerical values.
</p>

<p>
That is, querying <code>interpretExpr(e,X)</code> should
receive the response <code>X = n</code> where <code>n</code> is
the integer value of the expression.
</p>

<p>
Do not concern yourself with the other direction;
that is, we are not expecting queries
of the form <code>interpretExpr(X,n)</code> to result in an answer.
(If you can, “fail gracefully”,
i.e., either throw a more meaningful exception
or avoid an exception altogether
but this is not expected even as a bonus.)
</p>
</div>
</div>
</div>

<div id="outline-container-Part-3-–-Variables-and-substitution----[30 marks]" class="outline-2">
<h2 id="Part-3-–-Variables-and-substitution----[30 marks]">Part 3 – Variables and substitution    [30 marks]</h2>
<div class="outline-text-2" id="text-Part-3-–-Variables-and-substitution----[30 marks]">
<div class="org-center">
<p>
<b>Place your code for this part in files <code>a1p3.sc</code> and <code>a1p3.pl</code>.</b>
</p>
</div>
</div>

<div id="outline-container-Part-3-description" class="outline-3">
<h3 id="Part-3-description">Part 3 description</h3>
<div class="outline-text-3" id="text-Part-3-description">
<p>
In this part, we wish to add variables to our expressions.
</p>

<p>
This can be done by adding a new operator <code>var</code> to our expressions,
which operates on symbols representing variable names
(prolog has atoms which can be used a symbols,
and Scala has a <code>Symbol</code> type. The reason why symbols
are a better candidate than strings will be discussed
when we discuss types.)
</p>

<p>
However, adding this operator introduces a problem
with our <code>interpretExpr</code> method/predicate:
how do we interpret a variable when we don't know its value?
</p>

<p>
Our solution in this assignment is to
introduce a <i>substitution</i> operator,
which takes three values:
</p>
<ol class="org-ol">
<li>an expression to perform the substitution on,</li>
<li>the variable to be substituted, and</li>
<li>the expression to substitute for the variable.</li>
</ol>

<p>
For instance,
</p>
<div class="org-src-container">
<pre class="src src-text">subst var x x const 6
</pre>
</div>
<p>
would be written, using our usual mathematical syntax, as
</p>
<div class="org-src-container">
<pre class="src src-text">x<span style="color: #00cd68;">[</span>x &#8788; 6<span style="color: #00cd68;">]</span>
</pre>
</div>
<p>
It should interpet to just <code>6</code>.
</p>

<p>
(An alternate solution,
instead of building variable substitution into the language,
would be to add a <i>state</i> argument to <code>interpretExpr</code>,
which maps variables to values.
We will use states in later assignments for this purpose.)
</p>
</div>
</div>

<div id="outline-container-The-part-3" class="outline-3">
<h3 id="The-part-3">The part 3</h3>
<div class="outline-text-3" id="text-The-part-3">
<p>
In Scala, create a new algebraic datatype <code>VarExpr</code> and a new
interpretation method <code>interpretVarExpr</code> in Scala ([15 marks].)
Your new constructors should be called <code>Var</code> and <code>Subst</code>.
<del>You should reuse your existing <code>Expr</code> type when defining <code>VarExpr</code>,</del>
<del>by including a constructor <code>Simple</code> which takes a <code>Expr</code> argument.</del>
(Edited October 13th.)
You should also repeat the constructors from the part 1
as constructors for this new type.
</p>

<p>
In Prolog, create a new recognising predicate <code>isVarExpr</code> which
recognising valid expressions in this extended language,
with the new labels being the operator names given in the description,
and a new predicate <code>interpretVarExpr</code> which relates
expressions to their interpreted value ([15 marks].)
</p>

<div class="org-center">
<p>
<b>Pay attention when implementing the interpretation of substitution!</b>
<b>Review the concept of variable binding,</b>
<b>and do not substitute instances of the variable name</b>
<b>which are bound elsewhere!</b>
</p>
</div>

<p>
(This note added October 13th.)
Note: you are allowed and encouraged to collect any helper methods,
for instance a definition of exponentiation,
in a separate file which is imported into your files for the
different parts of this assignment.
Just ensure you use Ammonite-compatible import directives
in your Scala code.
</p>
</div>

<div id="outline-container-Hint-(added-October-13th)" class="outline-4">
<h4 id="Hint-(added-October-13th)">Hint (added October 13th)</h4>
<div class="outline-text-4" id="text-Hint-(added-October-13th)">
<div class="org-center">
<p>
<b>You may need to define a helper function/predicate</b>
<b>before you can define interpretation here.</b>
</p>
</div>
</div>
</div>
</div>
</div>

<div id="outline-container-Aside-–-review-of-substitution" class="outline-2">
<h2 id="Aside-–-review-of-substitution">Aside – review of substitution</h2>
<div class="outline-text-2" id="text-Aside-–-review-of-substitution">
<p>
Substitution of variables in terms should have been covered
in previous courses. Here we give a brief refresher
on the topic.
</p>

<p>
Consider a language of terms \(L\) which consists of
</p>
<ul class="org-ul">
<li>a set of constant symbols
<ul class="org-ul">
<li>(in our part 3, these are integers)</li>
</ul></li>
<li>a set of operation symbols
<ul class="org-ul">
<li>(in our part 3, these are the operators <code>const</code>, <code>neg</code>, <code>plus</code>, etc.). and</li>
</ul></li>
<li>a set of variable names
<ul class="org-ul">
<li>(in our part 3, the symbol type is used for variable names).</li>
</ul></li>
</ul>

<p>
We define substitution of terms for variables,
denoted \(e[x ≔ f]\), where
</p>
<ul class="org-ul">
<li>\(e\) is the starting term,</li>
<li>\(x\) is the variable being substituted for, and</li>
<li>\(f\) is the term being substituted for \(x\).</li>
</ul>
<p>
The definition is by <i>structural induction</i> on the term \(e\).
</p>

<p>
As base cases, we have substitution on <i>constants</i> and <i>variables</i>.
</p>
<ul class="org-ul">
<li>For any constant \(c\), \(c[x ≔ f] = c\).</li>
<li>For any variable \(y ≠ x\), \(y[x ≔ f] = y\).</li>
<li>And \(x[x ≔ f] = f\).</li>
</ul>

<p>
And we have one inductive case.
</p>
<ul class="org-ul">
<li>For any operation \(r\) and terms \(e₁\), \(e₂\), …, \(eₙ\),
\((r(e₁,e₂,…,eₙ))[x ≔ f] = r(e₁[x ≔ f], e₂[x ≔ f], …, eₙ[x ≔ f])\).</li>
</ul>
</div>

<div id="outline-container-The-scope-of-substitution" class="outline-3">
<h3 id="The-scope-of-substitution">The scope of substitution</h3>
<div class="outline-text-3" id="text-The-scope-of-substitution">
<p>
From the definition by structural recursion, it should be clear
that a substitution within a term <i>only affects the subterm</i> to which
that substitution is applied.
</p>

<p>
So, for instance, in the term <code>plus (subst (var x) (var x) (const 2)) var x</code>,
which would be written \(x[x ≔ 2] + x\) in our usual syntax,
the variable <code>x</code> on the right is <i>not</i> substituted.
</p>
</div>
</div>
</div>

<div id="outline-container-Part-4-–-Boolean-expressions-----------[30 marks]" class="outline-2">
<h2 id="Part-4-–-Boolean-expressions-----------[30 marks]">Part 4 – Boolean expressions           [30 marks]</h2>
<div class="outline-text-2" id="text-Part-4-–-Boolean-expressions-----------[30 marks]">
<div class="org-center">
<p>
<b>Place your code for this part in files <code>a1p4.sc</code> and <code>a1p4.pl</code>.</b>
</p>
</div>
</div>

<div id="outline-container-Part-4-description" class="outline-3">
<h3 id="Part-4-description">Part 4 description</h3>
<div class="outline-text-3" id="text-Part-4-description">
<p>
In this part, we create an alternate extension to
our first language of expressions
(that is, we build on to <code>Expr</code>, not <code>VarExpr</code>.)
</p>

<p>
Our goal here is to add
a second <i>type</i> of expressions to the language.
Namely, we are adding booleans.
</p>

<p>
The new operators are
the 0-ary <code>tt</code> and <code>ff</code> (0-ary meaning taking no arguments),
the unary <code>bnot</code> and the binary <code>band</code> and <code>bor</code>.
</p>

<p>
For example, we have the new expression
</p>
<div class="org-src-container">
<pre class="src src-text">bnot band tt bor ff tt
</pre>
</div>
<p>
which in our usual notation would be written
</p>
<div class="org-src-container">
<pre class="src src-text">&#172; <span style="color: #00cd68;">(</span>true &#8743; <span style="color: #b6a0ff;">(</span>false &#8744; true<span style="color: #b6a0ff;">)</span><span style="color: #00cd68;">)</span>
</pre>
</div>

<p>
These expressions cannot legally be allowed to mix
with integer expressions; that is,
trying to apply a integer operator to a boolean expression
or vice versa is not legal.
</p>
</div>
</div>

<div id="outline-container-The-part-4" class="outline-3">
<h3 id="The-part-4">The part 4</h3>
<div class="outline-text-3" id="text-The-part-4">
<p>
In Scala, create a new algebraic datatype <code>MixedExpr</code> and a new
interpretation method <code>interpretMixedExpr</code> in Scala ([15 marks].)
Your new constructors should be named <code>TT</code>, <code>FF</code>, <code>Band</code>, <code>Bor</code> and <code>Bnot</code>.
<del>You should again reuse your existing <code>Expr</code> type when defining <code>TypedExpr</code>,</del>
<del>by including a constructor <code>IntExpr</code> which takes a <code>Expr</code> argument.</del>
Your interpreter should return an <code>Option[Either[Int,Boolean]]</code>.
The <code>Option</code> type is used to handle failure in the case
of a “mixed” expression.
The <code>Either</code> type is used to handle two possible return types.
</p>

<p>
(Edited October 13th.)
As in part 3, you will need to repeat the constructors from the
<code>Expr</code> type in part 1 in this type's definition.
</p>

<p>
In Prolog, create a new recognising predicate <code>isMixedExpr</code> which
recognises valid expressions in this extended language,
with the new labels being the operator names given in the description,
and a new predicate <code>interpretMixedExpr</code> which relates
expressions to their interpreted value ([15 marks].)
</p>
</div>
</div>
</div>

<div id="outline-container-Part-5-–-Bonus-------------------[10 bonus_marks]" class="outline-2">
<h2 id="Part-5-–-Bonus-------------------[10 bonus_marks]">Part 5 – Bonus: parsing                [10 bonus marks]</h2>
<div class="outline-text-2" id="text-Part-5-–-Bonus-------------------[10 bonus_marks]">
<div class="org-center">
<p>
<b>Place your code for the bonus, if you attempt it, in <code>a1p5.sc</code> and/or <code>a1p5.pl</code>.</b>
</p>
</div>

<p>
Create a <i>parser</i> for the first language of expressions
in this assignment, both in Scala and in Prolog
(partial marks for implementing it in just one language.)
</p>

<p>
A parser will take as argument a string such as
</p>
<div class="org-src-container">
<pre class="src src-text">abs minus abs const 5 abs const 6
</pre>
</div>
<p>
and return an <code>Expr</code> representing the expression in that string.
</p>

<p>
You will likely want to first define a <i>lexer</i> for the language,
that converts a string to a list of lexemes
(to do this, you will need to represent lexemes somehow.)
Such a list is far easier to match over than a string.
</p>
</div>
</div>

<div id="outline-container-Submission-checklist" class="outline-2">
<h2 id="Submission-checklist">Submission checklist</h2>
<div class="outline-text-2" id="text-Submission-checklist">
<p>
For your convenience, this checklist is provided
to track the files you need to submit.
Use it if you wish.
</p>
<div class="org-src-container">
<pre class="src src-text">- <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> Documentation; one of
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> README.html
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> README.pdf
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> README.md
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> README.org
- <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> Part 1
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p1.sc
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p1_test.sc tests have passed! <span style="color: #00cd68;">(</span>No submission needed.<span style="color: #00cd68;">)</span>
- <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> Part 2
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p2.pl
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p2_test.plt tests have passed! <span style="color: #00cd68;">(</span>No submission needed.<span style="color: #00cd68;">)</span>
- <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> Part 3
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p3.sc
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p3.pl
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p3_test.sc tests have passed! <span style="color: #00cd68;">(</span>No submission needed.<span style="color: #00cd68;">)</span>
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p3_test.plt tests have passed! <span style="color: #00cd68;">(</span>No submission needed.<span style="color: #00cd68;">)</span>
- <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> Part 4
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p4.sc
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p4.pl
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p4_test.sc tests have passed! <span style="color: #00cd68;">(</span>No submission needed.<span style="color: #00cd68;">)</span>
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p4_test.plt tests have passed! <span style="color: #00cd68;">(</span>No submission needed.<span style="color: #00cd68;">)</span>
- <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> Part 5 <span style="color: #00cd68;">(</span>Bonus<span style="color: #00cd68;">)</span>
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p5.sc
  - <span style="color: #00cd68;">[</span> <span style="color: #00cd68;">]</span> a1p5.pl
</pre>
</div>
</div>
</div>

<div id="outline-container-Testing" class="outline-2">
<h2 id="Testing">Testing</h2>
<div class="outline-text-2" id="text-Testing">
<p>
Unit tests for the requested types, methods and predicates
are available here.
</p>
<ul class="org-ul">
<li><a href="./testing/a1/a1p1_test.sc">a1p1_test.sc</a></li>
<li><a href="./testing/a1/a1p3_test.sc">a1p3_test.sc</a></li>
<li><a href="./testing/a1/a1p4_test.sc">a1p4_test.sc</a></li>
<li><a href="./testing/a1/a1p2.plt">a1p2.plt</a></li>
<li><a href="./testing/a1/a1p3.plt">a1p3.plt</a></li>
<li><a href="./testing/a1/a1p4.plt">a1p4.plt</a></li>
</ul>
<p>
The contents of the unit test files are also repeated below.
</p>

<p>
The tests can be run by placing the test files
in the same directory as your code files.
</p>

<p>
To run the tests for the Scala portions, use the commands
</p>
<div class="org-src-container">
<pre class="src src-shell">amm a1pn_test.sc
</pre>
</div>
<p>
where the <code>n</code> in <code>a1pn_test.sc</code> is the appropriate part number.
</p>

<p>
To run the tests for the Prolog portions,us the commands
</p>
<div class="org-src-container">
<pre class="src src-shell">swipl -t <span style="color: #79a8ff;">"load_test_files([]), run_tests."</span> -s a1pn.pl
</pre>
</div>
<p>
where the <code>n</code> in <code>a1pn.pl</code> is the appropriate part number.
</p>

<div class="org-center">
<p>
<b>You are strongly encouraged to add your own additional test cases</b>
<b>to those provided for you.</b>
</p>

<p>
The provided test cases check a very minimal amount!
</p>
</div>
</div>

<div id="outline-container-Automated-testing-via-Docker" class="outline-3">
<h3 id="Automated-testing-via-Docker">Automated testing via Docker</h3>
<div class="outline-text-3" id="text-Automated-testing-via-Docker">
<p>
The Docker setup and usage scripts are available at the following links.
Their contents are also repeated below.
</p>
<ul class="org-ul">
<li><a href="./testing/a1/Dockerfile">Dockerfile</a></li>
<li><a href="./testing/a1/docker-compose.yml">docker-compose.yml</a></li>
<li><a href="./testing/a1/setup.sh">setup.sh</a></li>
<li><a href="./testing/a1/run.sh">run.sh</a></li>
</ul>
<p>
Place them into your <code>a1</code> directory where your code files
and the test files (linked to above) exist,
then run <code>setup.sh</code> and <code>run.sh</code>.
</p>

<p>
Note that the use of the <code>setup.sh</code> and <code>run.sh</code> scripts assumes
that you are in a <code>bash</code> like shell; if you are on Windows,
and not using WSL or WSL2, you may have
to run the commands contained in those scripts manually.
</p>
</div>
</div>

<div id="outline-container-The-tests" class="outline-3">
<h3 id="The-tests">The tests</h3>
<div class="outline-text-3" id="text-The-tests">
</div>

<div id="outline-container-Scala" class="outline-4">
<h4 id="Scala">Scala</h4>
<div class="outline-text-4" id="text-Scala">
</div>

<ul class="org-ul">
<li><a id="Framework"></a>Framework<br />
<div class="outline-text-5" id="text-Framework">
<p>
<a href="./testing/a1/a1_testframework.sc">a1_testframework.sc</a>
</p>
<div class="org-src-container">
<pre class="src src-amm"><span style="color: #a8a8a8;">/* </span><span style="color: #a8a8a8;">Given an expected result and a computed result,</span>
<span style="color: #a8a8a8;">   check if they are equal in value.</span>
<span style="color: #a8a8a8;">   If so, return 0. Otherwise, inform the user, and return 1,</span>
<span style="color: #a8a8a8;">   so the number of failures can be counted. */</span>
<span style="color: #b6a0ff;">def</span> <span style="color: #feacd0;">test</span><span style="color: #00cd68;">[</span><span style="color: #00bcff;">A</span><span style="color: #00cd68;">](</span>given<span style="color: #b6a0ff;">:</span> <span style="color: #f78fe7;">A</span>, expected<span style="color: #b6a0ff;">:</span> <span style="color: #f78fe7;">A</span>, the_test<span style="color: #b6a0ff;">:</span> <span style="color: #f78fe7;">String</span><span style="color: #00cd68;">)</span> <span style="color: #b6a0ff;">=</span>
  <span style="color: #b6a0ff;">if</span> <span style="color: #00cd68;">(</span>!<span style="color: #b6a0ff;">(</span>given equals expected<span style="color: #b6a0ff;">)</span><span style="color: #00cd68;">)</span> <span style="color: #00cd68;">{</span>
    println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"+---------------------------------------------------"</span><span style="color: #b6a0ff;">)</span>
    println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"| "</span> + the_test + <span style="color: #79a8ff;">" failed."</span><span style="color: #b6a0ff;">)</span>
    println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"| Expected "</span> + expected + <span style="color: #79a8ff;">", got "</span> + given + <span style="color: #79a8ff;">"."</span><span style="color: #b6a0ff;">)</span>
    println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"+---------------------------------------------------"</span><span style="color: #b6a0ff;">)</span>
    <span style="color: #00bcff;">1</span>
  <span style="color: #00cd68;">}</span> <span style="color: #b6a0ff;">else</span> <span style="color: #00cd68;">{</span>
    <span style="color: #00bcff;">0</span>
  <span style="color: #00cd68;">}</span>

<span style="color: #b6a0ff;">def</span> <span style="color: #feacd0;">runTests</span><span style="color: #00cd68;">[</span><span style="color: #00bcff;">A</span><span style="color: #00cd68;">](</span>tests<span style="color: #b6a0ff;">:</span> <span style="color: #f78fe7;">List</span><span style="color: #b6a0ff;">[</span><span style="color: #00bcff;">Tuple3</span><span style="color: #6ae4b9;">[</span><span style="color: #00bcff;">A</span>,<span style="color: #00bcff;">A</span>,<span style="color: #00bcff;">String</span><span style="color: #6ae4b9;">]</span><span style="color: #b6a0ff;">]</span><span style="color: #00cd68;">)</span><span style="color: #b6a0ff;">:</span> <span style="color: #f78fe7;">Unit</span> <span style="color: #b6a0ff;">=</span> <span style="color: #00cd68;">{</span>
  <span style="color: #a8a8a8;">// </span><span style="color: #a8a8a8;">Apply test to each element of tests, and sum the return values.</span>
  <span style="color: #a8a8a8;">// </span><span style="color: #a8a8a8;">This is essentially a for loop.</span>
  <span style="color: #b6a0ff;">val</span> <span style="color: #00d3d0;">failed</span> <span style="color: #b6a0ff;">=</span> tests.foldLeft<span style="color: #b6a0ff;">(</span><span style="color: #00bcff;">0</span><span style="color: #b6a0ff;">)</span> <span style="color: #b6a0ff;">{</span>
    <span style="color: #6ae4b9;">(</span>failures, next<span style="color: #6ae4b9;">)</span> <span style="color: #b6a0ff;">=&gt;</span> next <span style="color: #b6a0ff;">match</span> <span style="color: #6ae4b9;">{</span>
      <span style="color: #a8a8a8;">// </span><span style="color: #a8a8a8;">Deconstruct the tuple to get its parts</span>
      <span style="color: #b6a0ff;">case</span> <span style="color: #f0ce43;">(</span><span style="color: #00d3d0;">given</span>, <span style="color: #00d3d0;">expected</span>, <span style="color: #00d3d0;">the_test</span><span style="color: #f0ce43;">)</span> <span style="color: #b6a0ff;">=&gt;</span> failures + test<span style="color: #f0ce43;">(</span>given, expected, the_test<span style="color: #f0ce43;">)</span>
    <span style="color: #6ae4b9;">}</span>
  <span style="color: #b6a0ff;">}</span>
  
  println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"+---------------------------------------------------"</span><span style="color: #b6a0ff;">)</span>
  println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"| "</span> + failed + <span style="color: #79a8ff;">" tests failed"</span><span style="color: #b6a0ff;">)</span>
  println<span style="color: #b6a0ff;">(</span><span style="color: #79a8ff;">"+---------------------------------------------------"</span><span style="color: #b6a0ff;">)</span>
<span style="color: #00cd68;">}</span>
</pre>
</div>
</div>
</li>

<li><a id="Scala-testing-code-for-Part-1"></a>Scala testing code for Part 1<br />
<div class="outline-text-5" id="text-Scala-testing-code-for-Part-1">
<p>
<a href="./testing/a1/a1p1_test.sc">a1p1_test.sc</a>
</p>
<div class="org-src-container">
<pre class="src src-amm"><span style="color: #b6a0ff;">import</span> $file.a1_testframework, a1_testframework.<span style="color: #b6a0ff;">_</span>
<span style="color: #b6a0ff;">import</span> $file.a1p1, a1p1.<span style="color: #b6a0ff;">_</span>

<span style="color: #b6a0ff;">val</span> <span style="color: #00d3d0;">tests</span> <span style="color: #b6a0ff;">=</span> <span style="color: #00bcff;">List</span><span style="color: #00cd68;">(</span>
  <span style="color: #b6a0ff;">(</span>interpretExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Const</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">0</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">0</span>, <span style="color: #79a8ff;">"Constant expression 0"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Plus</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">5</span><span style="color: #00bcff;">)</span>,<span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">9</span>, <span style="color: #79a8ff;">"Additive expression 5 + 4"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Exp</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">5</span><span style="color: #00bcff;">)</span>,<span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">625</span>, <span style="color: #79a8ff;">"Exponential expression 5 ^ 4"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #00cd68;">)</span>

runTests<span style="color: #00cd68;">(</span>tests<span style="color: #00cd68;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="Scala-testing-code-for-Part-2"></a>Scala testing code for Part 2<br />
<div class="outline-text-5" id="text-Scala-testing-code-for-Part-2">
<p>
There is no Scala code for part 2.
</p>
</div>
</li>

<li><a id="Scala-testing-code-for-Part-3"></a>Scala testing code for Part 3<br />
<div class="outline-text-5" id="text-Scala-testing-code-for-Part-3">
<p>
<a href="./testing/a1/a1p3_test.sc">a1p3_test.sc</a>
</p>
<div class="org-src-container">
<pre class="src src-amm"><span style="color: #b6a0ff;">import</span> $file.a1_testframework, a1_testframework.<span style="color: #b6a0ff;">_</span>
<span style="color: #b6a0ff;">import</span> $file.a1p3, a1p3.<span style="color: #b6a0ff;">_</span>

<span style="color: #b6a0ff;">val</span> <span style="color: #00d3d0;">tests</span> <span style="color: #b6a0ff;">=</span> <span style="color: #00bcff;">List</span><span style="color: #00cd68;">(</span>
  <span style="color: #b6a0ff;">(</span>interpretVarExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Const</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">0</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">0</span>, <span style="color: #79a8ff;">"Constant expression 0"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretVarExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Plus</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">5</span><span style="color: #00bcff;">)</span>,<span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">9</span>, <span style="color: #79a8ff;">"Additive expression 5 + 4"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretVarExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Exp</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">5</span><span style="color: #00bcff;">)</span>,<span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">625</span>, <span style="color: #79a8ff;">"Exponential expression 5 ^ 4"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #a8a8a8;">// </span><span style="color: #a8a8a8;">New tests for this part specifically.</span>
  <span style="color: #b6a0ff;">(</span>interpretVarExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Subst</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Var</span><span style="color: #00bcff;">(</span><span style="color: #79a8ff;">'x</span><span style="color: #00bcff;">)</span>, <span style="color: #79a8ff;">'x</span>, <span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">0</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">0</span>,
                    <span style="color: #79a8ff;">"Simple substitution x[x := 0] expression"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretVarExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Subst</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Subst</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">Plus</span><span style="color: #80d200;">(</span><span style="color: #00bcff;">Var</span><span style="color: #f78fe7;">(</span><span style="color: #79a8ff;">'x</span><span style="color: #f78fe7;">)</span>,<span style="color: #00bcff;">Var</span><span style="color: #f78fe7;">(</span><span style="color: #79a8ff;">'y</span><span style="color: #f78fe7;">)</span><span style="color: #80d200;">)</span>,
                                <span style="color: #79a8ff;">'x</span>,
                                <span style="color: #00bcff;">Const</span><span style="color: #80d200;">(</span><span style="color: #00bcff;">5</span><span style="color: #80d200;">)</span><span style="color: #00bcff;">)</span>,
                          <span style="color: #79a8ff;">'y</span>,
                          <span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>,
                    <span style="color: #00bcff;">9</span>, <span style="color: #79a8ff;">"Nested substitution ((x + y)[x := 5])[y := 4]"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #00cd68;">)</span>

runTests<span style="color: #00cd68;">(</span>tests<span style="color: #00cd68;">)</span>
</pre>
</div>
</div>
</li>

<li><a id="Scala-testing-code-for-Part-4"></a>Scala testing code for Part 4<br />
<div class="outline-text-5" id="text-Scala-testing-code-for-Part-4">
<p>
<a href="./testing/a1/a1p4_test.sc">a1p4_test.sc</a>
</p>
<div class="org-src-container">
<pre class="src src-amm"><span style="color: #b6a0ff;">import</span> $file.a1_testframework, a1_testframework.<span style="color: #b6a0ff;">_</span>
<span style="color: #b6a0ff;">import</span> $file.a1p4, a1p4.<span style="color: #b6a0ff;">_</span>

<span style="color: #b6a0ff;">val</span> <span style="color: #00d3d0;">tests</span> <span style="color: #b6a0ff;">=</span> <span style="color: #00bcff;">List</span><span style="color: #00cd68;">(</span>
  <span style="color: #b6a0ff;">(</span>interpretMixedExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Const</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">0</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">Some</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Left</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">0</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #79a8ff;">"Constant expression 0"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretMixedExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Plus</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">5</span><span style="color: #00bcff;">)</span>,<span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">Some</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Left</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">9</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #79a8ff;">"Additive expression 5 + 4"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretMixedExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Exp</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">5</span><span style="color: #00bcff;">)</span>,<span style="color: #00bcff;">Const</span><span style="color: #00bcff;">(</span><span style="color: #00bcff;">4</span><span style="color: #00bcff;">)</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #00bcff;">Some</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Left</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">625</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>, <span style="color: #79a8ff;">"Exponential expression 5 ^ 4"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #a8a8a8;">// </span><span style="color: #a8a8a8;">New tests for this part specifically.</span>
  <span style="color: #b6a0ff;">(</span>interpretMixedExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">TT</span><span style="color: #6ae4b9;">)</span>,<span style="color: #00bcff;">Some</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Right</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">true</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>,<span style="color: #79a8ff;">"Constant expression true"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #b6a0ff;">(</span>interpretMixedExpr<span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Band</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">TT</span>,<span style="color: #00bcff;">FF</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>,<span style="color: #00bcff;">Some</span><span style="color: #6ae4b9;">(</span><span style="color: #00bcff;">Right</span><span style="color: #f0ce43;">(</span><span style="color: #00bcff;">false</span><span style="color: #f0ce43;">)</span><span style="color: #6ae4b9;">)</span>,<span style="color: #79a8ff;">"And expression true &amp;&amp; false"</span><span style="color: #b6a0ff;">)</span>,
  <span style="color: #00cd68;">)</span>

runTests<span style="color: #00cd68;">(</span>tests<span style="color: #00cd68;">)</span>
</pre>
</div>
</div>
</li>
</ul>
</div>

<div id="outline-container-Prolog" class="outline-4">
<h4 id="Prolog">Prolog</h4>
<div class="outline-text-4" id="text-Prolog">
</div>

<ul class="org-ul">
<li><a id="Prolog-testing-code-for-Part-1"></a>Prolog testing code for Part 1<br />
<div class="outline-text-5" id="text-Prolog-testing-code-for-Part-1">
<p>
There is no Prolog code for part 1.
</p>
</div>
</li>

<li><a id="Prolog-testing-code-for-Part-2"></a>Prolog testing code for Part 2<br />
<div class="outline-text-5" id="text-Prolog-testing-code-for-Part-2">
<p>
<a href="./testing/a1/a1p2.plt">a1p2.plt</a>
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- begin_tests(a1p2).
:- include(a1p2).

<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression 0 is expression'</span>, nondet) :-
        isExpr(constE(0)).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Additive expression 5 + 4 is expression'</span>, nondet) :-
        isExpr(plusE(constE(5),constE(4))).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Exponential expression 5 ^ 4 is expression'</span>, nondet) :-
        isExpr(expE(constE(5),constE(4))).

<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression 0'</span>, nondet) :-
        interpretExpr(constE(0),0).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Additive expression 5 + 4'</span>, nondet) :-
        interpretExpr(plusE(constE(5),constE(4)),9).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Exponential expression 5 ^ 4'</span>, nondet) :-
        interpretExpr(expE(constE(5),constE(4)),625).
</pre>
</div>
</div>
</li>

<li><a id="Prolog-testing-code-for-Part-3"></a>Prolog testing code for Part 3<br />
<div class="outline-text-5" id="text-Prolog-testing-code-for-Part-3">
<p>
<a href="./testing/a1/a1p3.plt">a1p3.plt</a>
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- begin_tests(a1p3).
:- include(a1p3).

<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression 0 is expression'</span>, nondet) :-
        isVarExpr(constE(0)).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Additive expression 5 + 4 is expression'</span>, nondet) :-
        isVarExpr(plusE(constE(5),constE(4))).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Exponential expression 5 ^ 4 is expression'</span>, nondet) :-
        isVarExpr(expE(constE(5),constE(4))).

<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression 0'</span>, nondet) :-
        interpretVarExpr(constE(0),0).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Additive expression 5 + 4'</span>, nondet) :-
        interpretVarExpr(plusE(constE(5),constE(4)),9).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Exponential expression 5 ^ 4'</span>, nondet) :-
        interpretVarExpr(expE(constE(5),constE(4)),625).

<span style="color: #a8a8a8;">% </span><span style="color: #a8a8a8;">New tests for this part specifically.</span>
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Simple substitution x[x := 0] is expression'</span>, nondet) :-
        isVarExpr(subst(var(x),x,constE(0))).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Nested substitution ((x + y)[x := 5])[y := 4] is expression'</span>, nondet) :-
        isVarExpr(subst(subst(plusE(var(x),var(y)),
                              x,
                              constE(5)),
                        y,
                        constE(4))).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Simple substitution x[x := 0]'</span>, nondet) :-
        interpretVarExpr(subst(var(x),x,constE(0)),0).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Nested substitution ((x + y)[x := 5])[y := 4]'</span>, nondet) :-
        interpretVarExpr(subst(subst(plusE(var(x),var(y)),
                                     x,
                                     constE(5)),
                               y,
                               constE(4)),
                         9).
</pre>
</div>
</div>
</li>

<li><a id="Prolog-testing-code-for-Part-4"></a>Prolog testing code for Part 4<br />
<div class="outline-text-5" id="text-Prolog-testing-code-for-Part-4">
<p>
<a href="./testing/a1/a1p4.plt">a1p4.plt</a>
</p>
<div class="org-src-container">
<pre class="src src-prolog">:- begin_tests(a1p4).
:- include(a1p4).

<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression 0 is expression'</span>, nondet) :-
        isMixedExpr(constE(0)).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Additive expression 5 + 4 is expression'</span>, nondet) :-
        isMixedExpr(plusE(constE(5),constE(4))).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Exponential expression 5 ^ 4 is expression'</span>, nondet) :-
        isMixedExpr(expE(constE(5),constE(4))).

<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression 0'</span>, nondet) :-
        interpretMixedExpr(constE(0),0).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Additive expression 5 + 4'</span>, nondet) :-
        interpretMixedExpr(plusE(constE(5),constE(4)),9).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Exponential expression 5 ^ 4'</span>, nondet) :-
        interpretMixedExpr(expE(constE(5),constE(4)),625).

<span style="color: #a8a8a8;">% </span><span style="color: #a8a8a8;">New tests for this part specifically.</span>
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression true is expression'</span>, nondet) :-
        isMixedExpr(tt).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'And expression true &amp;&amp; false is expression'</span>, nondet) :-
        isMixedExpr(band(tt,ff)).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'Constant expression true'</span>, nondet) :-
        interpretMixedExpr(tt,true).
<span style="color: #feacd0;">test</span>(<span style="color: #79a8ff;">'And expression true &amp;&amp; false'</span>, nondet) :-
        interpretMixedExpr(band(tt,ff),false).
</pre>
</div>
</div>
</li>
</ul>
</div>
</div>

<div id="outline-container-The-Docker-setup" class="outline-3">
<h3 id="The-Docker-setup">The Docker setup</h3>
<div class="outline-text-3" id="text-The-Docker-setup">
<p>
<a href="./testing/a1/Dockerfile">Dockerfile</a>
</p>
<div class="org-src-container">
<pre class="src src-docker"># Define the argument for openjdk version
ARG OPENJDK_TAG=8u232
# Use the SWI Prolog image as a base, then add Scala after.
FROM swipl

# Set the name of the maintainers
MAINTAINER Habib Ghaffari Hadigheh, Mark Armstrong &lt;ghaffh1@mcmaster.ca, armstmp@mcmaster.ca&gt;

RUN apt-get update &amp;&amp; \
    apt-get install scala -y &amp;&amp; \
    apt-get install -y curl &amp;&amp; \
    sh -c '(echo "#!/usr/bin/env sh" &amp;&amp; \
    curl -L https://github.com/lihaoyi/Ammonite/releases/download/2.1.1/2.12-2.1.1) &gt; /usr/local/bin/amm &amp;&amp; \
    chmod +x /usr/local/bin/amm'
RUN (rm -rf /root/.cache)

# Set the working directory
WORKDIR /opt/a1/

CMD ['bash']
</pre>
</div>

<p>
<a href="./testing/a1/docker-compose.yml">docker-compose.yml</a>
</p>
<div class="org-src-container">
<pre class="src src-yaml">version: '2'
services:
  service:
    build: .
    image: 3mi3_a1_docker_image
    volumes:
      - .:/opt/a1
    container_name: 3mi3_a1_container
    command: bash -c
      "echo 'Part 1 tests' &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       amm a1p1_test.sc &amp;&amp;
       echo '\n\n\n' &amp;&amp;
       echo 'Part 2 tests' &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       swipl -t \"load_test_files([]), run_tests.\" -s a1p2.plt &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       echo '\n\n\n' &amp;&amp;
       echo 'Part 3 Scala tests' &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       amm a1p3_test.sc &amp;&amp;
       echo '\n\n\n' &amp;&amp;
       echo 'Part 3 Prolog tests' &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       swipl -t \"load_test_files([]), run_tests.\" -s a1p3.plt &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       echo '\n\n\n' &amp;&amp;
       echo 'Part 4 Scala tests' &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       amm a1p4_test.sc &amp;&amp;
       echo '\n\n\n' &amp;&amp;
       echo 'Part 4 Prolog tests' &amp;&amp;
       echo '----------------------------------------------------------------------' &amp;&amp;
       swipl -t \"load_test_files([]), run_tests.\" -s a1p4.plt &amp;&amp;
       echo '----------------------------------------------------------------------'"
</pre>
</div>

<p>
<a href="./testing/a1/setup.sh">setup.sh</a>
</p>
<div class="org-src-container">
<pre class="src src-shell">docker-compose build --force-rm
</pre>
</div>

<p>
<a href="./testing/a1/run.sh">run.sh</a>
</p>
<div class="org-src-container">
<pre class="src src-shell"><span style="color: #a8a8a8;"># </span><span style="color: #a8a8a8;">Run the container</span>
docker-compose up --force-recreate
<span style="color: #a8a8a8;"># </span><span style="color: #a8a8a8;">Stop the container after finishing the test run</span>
docker-compose stop -t 1
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: Mark Armstrong</p>
     <p class="author">Contact: <a href="mailto:markparmstrong@gmail.com">markparmstrong@gmail.com</a></p>
     <p class="date">Original date: September 21st, 2020</p>
     <p class="date">Last updated: 2020-10-20 Tue 01:18</p>
     <p class="creator">Created using <a href="https://www.gnu.org/software/emacs/">Emacs</a> 27.0.90 (<a href="https://orgmode.org">Org</a> mode 9.4)</p>
     <p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
